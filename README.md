# orbitofdeceit.github.io

This repository is a GitHub Pages site built with Jekyll (via the `github-pages` gem).

This README documents how to reproduce the build locally, the CI that verifies the build, and a few tips for future upgrades.

## Quick start (recommended)

Requirements
- macOS or Linux
- rbenv (or rvm/asdf) to manage Ruby versions
- Ruby 2.7.x (we use 2.7.8 in CI)
- Bundler 2.1.4 (the `Gemfile.lock` is bundled with this Bundler version)

Commands (zsh)

1. Install Ruby 2.7.8 (rbenv example)

```bash
brew update
brew install rbenv ruby-build
eval "$(rbenv init - zsh)"
rbenv install -s 2.7.8
rbenv local 2.7.8
```

2. Install Bundler and the gems, then build

```bash
gem install bundler -v 2.1.4
bundle _2.1.4_ install --jobs 4 --retry 3
bundle exec jekyll build
# output is in _site/
```

If you prefer not to install Ruby locally, CI runs the build and uploads the generated site as an artifact (see below).

## CI and automated lockfile

- `.github/workflows/jekyll-ci.yml` — builds the site on push/PR using Ruby 2.7 and uploads `_site` as the `site` artifact. Use the Actions run page to download the artifact.
- `.github/workflows/generate-gemfile-lock.yml` — a workflow we added that runs on push (and manually) to generate/update `Gemfile.lock` using the same resolution path as CI and commits it back to `master`.

To download the built site artifact:

1. Open the workflow run page (e.g. the latest run) in GitHub Actions.
2. In the run summary, find the **Artifacts** section and download the `site` zip.
3. Unzip and preview locally:

```bash
mkdir -p /tmp/orbit-site
unzip ~/Downloads/site.zip -d /tmp/orbit-site
open /tmp/orbit-site/index.html   # macOS: open in browser
# or run a local server
cd /tmp/orbit-site && python3 -m http.server 4000
```

## Notes and recommendations

- This site currently uses `github-pages` (bundled Jekyll 3.6.2). If you want newer Jekyll features, the safest path is to build with GitHub Actions and deploy the generated static site (rather than relying on GitHub Pages' built-in Jekyll version).
- The repository's `Gemfile.lock` was generated by CI to match the resolution used in the workflow (Ruby 2.7 + Bundler 2.1.4). To reproduce locally, use the versions listed above.
- Consider upgrading dependencies in a separate branch and testing thoroughly — Jekyll 3 -> 4/5 has plugin and theme compatibility implications.

## Contact / troubleshooting

If you hit errors while running `bundle install` or `jekyll build`, check:
- You're using Ruby 2.7.x (older Bundler and gems expect Ruby < 3.0)
- `gem install bundler -v 2.1.4`
- If an error appears in CI but not locally, open the Actions run page and paste the failing step logs when asking for help.

---

Small automation was added to help keep `Gemfile.lock` in sync with the CI environment; if you prefer manual control, you can remove or disable `.github/workflows/generate-gemfile-lock.yml`.
